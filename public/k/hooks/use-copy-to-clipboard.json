{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-copy-to-clipboard",
  "type": "registry:hook",
  "title": "Use Copy To Clipboard",
  "description": "Use the useCopyToClipboard hook to copy text to the clipboard and track whether the copy action was successful, with an optional delay to reset the copied state.",
  "files": [
    {
      "path": "registry/hooks/use-copy-to-clipboard.ts",
      "content": "import * as React from \"react\"\r\n\r\ntype CopyFn = (text: string) => Promise<void>\r\n\r\nexport function useCopyToClipboard(delay = 2000): [CopyFn, boolean] {\r\n  const [isCopied, setIsCopied] = React.useState(false)\r\n\r\n  React.useEffect(() => {\r\n    if (!isCopied) return\r\n\r\n    const timer = setTimeout(() => {\r\n      setIsCopied(false)\r\n    }, delay)\r\n\r\n    return () => clearTimeout(timer)\r\n  }, [isCopied, delay])\r\n\r\n  const copy: CopyFn = React.useCallback(async (text) => {\r\n    if (!navigator?.clipboard) {\r\n      throw new Error(\"Clipboard not supported\")\r\n    }\r\n\r\n    if (!text) {\r\n      throw new Error(\"The 'text' argument is required.\")\r\n    }\r\n\r\n    const isPlainText = /^[\\x00-\\x7F]*$/.test(text)\r\n    const isHtmlText = /<[^>]+>/.test(text)\r\n    const isMarkdownText = /^#+\\s/.test(text)\r\n\r\n    const clipboardItem = new ClipboardItem(\r\n      isPlainText\r\n        ? { \"text/plain\": new Blob([text], { type: \"text/plain\" }) }\r\n        : isHtmlText\r\n          ? { \"text/html\": new Blob([text], { type: \"text/html\" }) }\r\n          : isMarkdownText\r\n            ? { \"text/markdown\": new Blob([text], { type: \"text/markdown\" }) }\r\n            : { \"text/plain\": new Blob([text], { type: \"text/plain\" }) }\r\n    )\r\n\r\n    try {\r\n      await navigator.clipboard.write([clipboardItem])\r\n      setIsCopied(true)\r\n    } catch (error) {\r\n      throw new Error(error instanceof Error ? error.message : \"Copy failed\") // Throw error instead of returning false\r\n    }\r\n  }, [])\r\n\r\n  return [copy, isCopied]\r\n}\r\n",
      "type": "registry:hook"
    }
  ]
}
