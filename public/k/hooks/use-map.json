{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-map",
  "type": "registry:hook",
  "title": "Use Map",
  "description": "Synchronize and update state based on the Map data structure with useMap.",
  "files": [
    {
      "path": "registry/hooks/use-map.ts",
      "content": "import * as React from \"react\"\r\n\r\nclass ReactiveMap<K, V> extends Map<K, V> {\r\n  private reRender: () => void\r\n\r\n  constructor(reRender: () => void, entries?: Iterable<[K, V]>) {\r\n    super(entries || [])\r\n    this.reRender = reRender\r\n  }\r\n\r\n  set(key: K, value: V): this {\r\n    super.set(key, value)\r\n    this.reRender()\r\n    return this\r\n  }\r\n\r\n  delete(key: K): boolean {\r\n    const result = super.delete(key)\r\n    this.reRender()\r\n    return result\r\n  }\r\n\r\n  clear(): void {\r\n    super.clear()\r\n    this.reRender()\r\n  }\r\n}\r\n\r\nexport function useMap<K, V>(initialState?: Iterable<[K, V]>): Map<K, V> {\r\n  const [, reRender] = React.useReducer((x) => x + 1, 0)\r\n\r\n  const mapRef = React.useRef<ReactiveMap<K, V> | null>(null)\r\n\r\n  if (!mapRef.current) {\r\n    mapRef.current = new ReactiveMap(reRender, initialState || [])\r\n  }\r\n\r\n  return mapRef.current\r\n}\r\n",
      "type": "registry:hook"
    }
  ]
}
