{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-uncontrolled-state",
  "type": "registry:hook",
  "title": "Use Uncontrolled State",
  "description": "Manage an uncontrolled state with the useUncontrolledState hook, providing methods to set it to true, false, or toggle between them",
  "registryDependencies": ["https://usekit.kiron.dev/k/use-callback-ref"],
  "files": [
    {
      "path": "registry/hooks/use-uncontrolled-state.ts",
      "content": "import * as React from \"react\"\r\n\r\nimport { useCallbackRef } from \"./use-callback-ref\"\r\n\r\ninterface Props<T> {\r\n  defaultProp?: T\r\n  onChange?: (state: T) => void\r\n}\r\n\r\nexport function useUncontrolledState<T>({ defaultProp, onChange }: Props<T>) {\r\n  const [state, setState] = React.useState(defaultProp)\r\n  const prevStateRef = React.useRef(state)\r\n  const handleChange = useCallbackRef(onChange)\r\n\r\n  React.useEffect(() => {\r\n    if (prevStateRef.current !== state && state !== undefined) {\r\n      handleChange(state)\r\n      prevStateRef.current = state\r\n    }\r\n  }, [state, handleChange])\r\n\r\n  const setStateOptimized = React.useCallback(\r\n    (value: React.SetStateAction<T | undefined>) => {\r\n      setState((prev) => {\r\n        const nextValue =\r\n          typeof value === \"function\"\r\n            ? (value as (prevState: T | undefined) => T | undefined)(prev)\r\n            : value\r\n\r\n        if (Object.is(prev, nextValue)) {\r\n          return prev\r\n        }\r\n        return nextValue\r\n      })\r\n    },\r\n    []\r\n  )\r\n\r\n  return [state, setStateOptimized] as const\r\n}\r\n",
      "type": "registry:hook"
    }
  ]
}
