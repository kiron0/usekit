{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-draggable",
  "type": "registry:hook",
  "title": "Use Draggable",
  "description": "Create draggable elements with useDraggable, providing options to customize the drag behavior.",
  "files": [
    {
      "path": "registry/hooks/use-draggable.ts",
      "content": "import * as React from \"react\"\n\ninterface Options<T extends HTMLElement> {\n  canDrag?: (element: T) => boolean\n}\n\ninterface Return<T extends HTMLElement> {\n  ref: React.RefObject<T | null>\n  isDragging: boolean\n}\n\nexport function useDraggable<T extends HTMLElement>(\n  options: Options<T> = {}\n): Return<T> {\n  const { canDrag } = options\n\n  const ref = React.useRef<T>(null)\n\n  const [isDragging, setIsDragging] = React.useState(false)\n\n  const positionRef = React.useRef({ x: 0, y: 0 })\n\n  const eventListeners = React.useRef<{\n    move?: (e: MouseEvent | TouchEvent) => void\n    up?: () => void\n  }>({})\n\n  React.useEffect(() => {\n    return () => {\n      if (eventListeners.current.move) {\n        document.removeEventListener(\"mousemove\", eventListeners.current.move)\n        document.removeEventListener(\"touchmove\", eventListeners.current.move)\n      }\n      if (eventListeners.current.up) {\n        document.removeEventListener(\"mouseup\", eventListeners.current.up)\n        document.removeEventListener(\"touchend\", eventListeners.current.up)\n      }\n    }\n  }, [])\n\n  const handleMouseUp = React.useCallback(() => {\n    setIsDragging(false)\n    if (eventListeners.current.move) {\n      document.removeEventListener(\"mousemove\", eventListeners.current.move)\n      document.removeEventListener(\"touchmove\", eventListeners.current.move)\n    }\n    if (eventListeners.current.up) {\n      document.removeEventListener(\"mouseup\", eventListeners.current.up)\n      document.removeEventListener(\"touchend\", eventListeners.current.up)\n    }\n    eventListeners.current = {}\n  }, [])\n\n  React.useEffect(() => {\n    if (typeof window === \"undefined\") return\n\n    const element = ref.current\n    if (!element) return\n\n    const handleStart = (e: MouseEvent | TouchEvent) => {\n      const isTouchEvent = e.type === \"touchstart\"\n      const clientX = isTouchEvent\n        ? (e as TouchEvent).touches[0].clientX\n        : (e as MouseEvent).clientX\n      const clientY = isTouchEvent\n        ? (e as TouchEvent).touches[0].clientY\n        : (e as MouseEvent).clientY\n\n      if (!isTouchEvent && (e as MouseEvent).button !== 0) return\n      e.preventDefault()\n\n      if (canDrag && !canDrag(element)) return\n\n      setIsDragging(true)\n      const startX = clientX - positionRef.current.x\n      const startY = clientY - positionRef.current.y\n\n      const rect = element.getBoundingClientRect()\n      const elementWidth = element.offsetWidth\n      const elementHeight = element.offsetHeight\n      const originalLeft = rect.left - positionRef.current.x\n      const originalTop = rect.top - positionRef.current.y\n\n      const moveListener = (e: MouseEvent | TouchEvent) => {\n        e.preventDefault()\n        const isTouchMove = e.type === \"touchmove\"\n        const moveX = isTouchMove\n          ? (e as TouchEvent).touches[0].clientX\n          : (e as MouseEvent).clientX\n        const moveY = isTouchMove\n          ? (e as TouchEvent).touches[0].clientY\n          : (e as MouseEvent).clientY\n\n        let newX = moveX - startX\n        let newY = moveY - startY\n\n        const maxX = window.innerWidth - originalLeft - elementWidth\n        const minX = -originalLeft\n        newX = Math.max(minX, Math.min(newX, maxX))\n\n        const maxY = window.innerHeight - originalTop - elementHeight\n        const minY = -originalTop\n        newY = Math.max(minY, Math.min(newY, maxY))\n\n        positionRef.current = { x: newX, y: newY }\n        element.style.transform = `translate(${newX}px, ${newY}px)`\n      }\n\n      const upListener = () => {\n        handleMouseUp()\n        document.removeEventListener(\"mousemove\", moveListener)\n        document.removeEventListener(\"mouseup\", upListener)\n        document.removeEventListener(\"touchmove\", moveListener)\n        document.removeEventListener(\"touchend\", upListener)\n      }\n\n      eventListeners.current.move = moveListener\n      eventListeners.current.up = upListener\n\n      document.addEventListener(\"mousemove\", moveListener)\n      document.addEventListener(\"mouseup\", upListener)\n      document.addEventListener(\"touchmove\", moveListener)\n      document.addEventListener(\"touchend\", upListener)\n    }\n\n    element.addEventListener(\"mousedown\", handleStart)\n    element.addEventListener(\"touchstart\", handleStart)\n    return () => {\n      element.removeEventListener(\"mousedown\", handleStart)\n      element.removeEventListener(\"touchstart\", handleStart)\n    }\n  }, [ref, canDrag, handleMouseUp])\n\n  return { ref, isDragging }\n}\n",
      "type": "registry:hook"
    }
  ]
}
