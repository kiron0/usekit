{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-draggable",
  "type": "registry:hook",
  "title": "Use Draggable",
  "description": "Create draggable elements with useDraggable, providing options to customize the drag behavior.",
  "files": [
    {
      "path": "registry/hooks/use-draggable.ts",
      "content": "import * as React from \"react\"\r\n\r\ninterface DragOptions<T extends HTMLElement> {\r\n  canDrag?: (element: T) => boolean\r\n}\r\n\r\nexport function useDraggable<T extends HTMLElement>(\r\n  options: DragOptions<T> = {}\r\n): { ref: React.RefObject<T>; isDragging: boolean } {\r\n  const { canDrag } = options\r\n  const ref = React.useRef<T>(null)\r\n  const [isDragging, setIsDragging] = React.useState(false)\r\n  const positionRef = React.useRef({ x: 0, y: 0 })\r\n  const eventListeners = React.useRef<{\r\n    move?: (e: MouseEvent) => void\r\n    up?: () => void\r\n  }>({})\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (eventListeners.current.move) {\r\n        document.removeEventListener(\"mousemove\", eventListeners.current.move)\r\n      }\r\n      if (eventListeners.current.up) {\r\n        document.removeEventListener(\"mouseup\", eventListeners.current.up)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const handleMouseUp = React.useCallback(() => {\r\n    setIsDragging(false)\r\n    if (eventListeners.current.move) {\r\n      document.removeEventListener(\"mousemove\", eventListeners.current.move)\r\n    }\r\n    if (eventListeners.current.up) {\r\n      document.removeEventListener(\"mouseup\", eventListeners.current.up)\r\n    }\r\n    eventListeners.current = {}\r\n  }, [])\r\n\r\n  React.useEffect(() => {\r\n    if (typeof window === \"undefined\") return\r\n\r\n    const element = ref.current\r\n    if (!element) return\r\n\r\n    const handleMouseDown = (e: MouseEvent) => {\r\n      if (e.button !== 0) return\r\n      e.preventDefault()\r\n\r\n      if (canDrag && !canDrag(element)) return\r\n\r\n      setIsDragging(true)\r\n      const startX = e.clientX - positionRef.current.x\r\n      const startY = e.clientY - positionRef.current.y\r\n\r\n      const rect = element.getBoundingClientRect()\r\n      const elementWidth = element.offsetWidth\r\n      const elementHeight = element.offsetHeight\r\n      const originalLeft = rect.left - positionRef.current.x\r\n      const originalTop = rect.top - positionRef.current.y\r\n\r\n      const moveListener = (e: MouseEvent) => {\r\n        e.preventDefault()\r\n        let newX = e.clientX - startX\r\n        let newY = e.clientY - startY\r\n\r\n        const maxX = window.innerWidth - originalLeft - elementWidth\r\n        const minX = -originalLeft\r\n        newX = Math.max(minX, Math.min(newX, maxX))\r\n\r\n        const maxY = window.innerHeight - originalTop - elementHeight\r\n        const minY = -originalTop\r\n        newY = Math.max(minY, Math.min(newY, maxY))\r\n\r\n        positionRef.current = { x: newX, y: newY }\r\n        element.style.transform = `translate(${newX}px, ${newY}px)`\r\n      }\r\n\r\n      const upListener = () => {\r\n        handleMouseUp()\r\n        document.removeEventListener(\"mousemove\", moveListener)\r\n        document.removeEventListener(\"mouseup\", upListener)\r\n      }\r\n\r\n      eventListeners.current.move = moveListener\r\n      eventListeners.current.up = upListener\r\n\r\n      document.addEventListener(\"mousemove\", moveListener)\r\n      document.addEventListener(\"mouseup\", upListener)\r\n    }\r\n\r\n    element.addEventListener(\"mousedown\", handleMouseDown)\r\n    return () => element.removeEventListener(\"mousedown\", handleMouseDown)\r\n  }, [ref, canDrag, handleMouseUp])\r\n\r\n  return { ref: ref as React.RefObject<T>, isDragging }\r\n}\r\n",
      "type": "registry:hook"
    }
  ]
}
